/*
 * global.h
 *
 *  Created on: Nov 21, 2025
 *      Author: Admin
 */

#ifndef INC_GLOBAL_H_
#define INC_GLOBAL_H_

#include "main.h"

/****************** SCHEDULER DEFINE *********************/
#define SCH_MAX_TASKS 40
#define NO_TASK_ID    0

/****************** BUTTON DEFINE *********************/
#define N0_OF_BUTTONS              3
#define DURATION_FOR_AUTO_INCREASING 100
#define DOUBLE_PRESS_CHECKIN       8
#define DOUBLE_PRESS_TIMEOUT       15
#define BUTTON_IS_PRESSED          0
#define BUTTON_IS_RELEASED         1

/****************** LIGHT DEFINE *********************/
#define RED_STATE    0
#define GREEN_STATE  1
#define YELLOW_STATE 2

/****************** SYSTEM DEFINE *********************/
#define AUTO_STATE       0
#define MANUAL_STATE 	 1
#define CONFIG_STATE     2
#define ERROR_STATE  	 3

#define DURATION_RED     5
#define DURATION_YELLOW  2
#define DURATION_GREEN   3

/****************** SETTING STATE DEFINE *********************/
#define CONFIG_RED_STATE    0
#define CONFIG_YELLOW_STATE 1
#define CONFIG_GREEN_STATE  2

/****************** STRUCTURE DEFINE **************************/
typedef struct {
    uint16_t      btn_Pin;
    GPIO_TypeDef *btn_Port;

    GPIO_PinState btn_state;
    GPIO_PinState debounceButton_1;
    GPIO_PinState debounceButton_2;
    GPIO_PinState debounceButton_3;

    uint8_t  flagForButtonPress1s;
    uint8_t  flagForButtonPressDouble;
    uint8_t  firtpressflag;
    uint8_t  flagpress;
    uint16_t counterForButtonPress1s;
    uint16_t counterForButtonPressDouble;
} btn_typedef;

typedef struct {
    uint16_t LIGHTA_Pin;
    uint16_t LIGHTB_Pin;

    GPIO_TypeDef *LIGHTA_Port;
    GPIO_TypeDef *LIGHTB_Port;
} RGB_TrafficLight_t;

/****************** GLOBAL VARIABLES DEFINE *********************/

// SYSTEM STATE / COUNTERS
extern uint8_t system_state;
extern uint8_t setting_state;

extern uint8_t light_state1;
extern uint8_t light_state2;

extern uint8_t Pre_Red_Counter;
extern uint8_t Pre_Yellow_Counter;
extern uint8_t Pre_Green_Counter;

extern uint8_t Red_Counter;
extern uint8_t Yellow_Counter;
extern uint8_t Green_Counter;

extern uint8_t Red_Counter_temp1;
extern uint8_t Yellow_Counter_temp1;
extern uint8_t Green_Counter_temp1;

extern uint8_t Red_Counter_temp2;
extern uint8_t Yellow_Counter_temp2;
extern uint8_t Green_Counter_temp2;

// 7-SEG DISPLAY VALUES
extern uint8_t num1;
extern uint8_t num2;

// BUTTON ARRAY
extern btn_typedef btn[N0_OF_BUTTONS];

// TRAFFIC LIGHT INSTANCES
extern RGB_TrafficLight_t RGB_tl1;
extern RGB_TrafficLight_t RGB_tl2;


#endif /* INC_GLOBAL_H_ */
